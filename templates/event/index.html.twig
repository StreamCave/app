{% extends 'base.html.twig' %}

{% block title %}Liste des événements
{% endblock %}


{% block body %}


	<section id="event_index">
		<div class="container">
			<div id="event_hub">
				<h3>Next event | Current event</h3>

				{% for event in events %}
					{% if "now"|date_modify("+1 day")|date("m/d/Y", "Europe/Paris") == event.eventStartDate|date('m/d/Y', "Europe/Paris") %}
						<div class="event-full">
							<div class="content">
								<div class="top_left">
									<div class="name">
										<h2>{{event.eventName}}</h2>
									</div>
									<div class="edition">
										<span class="badge bg-light text-dark">{{event.eventEdition}}</span>
									</div>
								</div>
								<div class="top_right">
									{% if "now"|date_modify("+1 day")|date("m/d/Y", "Europe/Paris") == event.eventStartDate|date('m/d/Y', "Europe/Paris") %}
										<span class="badge bg-warning pulsate-bck">Demain</span>
									{% endif %}
									{% if "now"|date_modify("now")|date("m/d/Y") == event.eventEndDate|date("m/d/Y") %}
										<span class="badge bg-success pulsate-bck">Maintenant</span>
									{% endif %}
									{% if "now"|date_modify("-1 day")|date("m/d/Y", "Europe/Paris") == event.eventStartDate|date('m/d/Y', "Europe/Paris") %}
										<span class="badge bg-light">Hier</span>
									{% endif %}
									<span class="badge bg-light" style="color: #212529">{{ event.eventStartDate ? event.eventStartDate|date('j l, F', "Europe/Paris") : '' }}</span>
								</div>
								<div class="logo">
									<img src="{{event.eventLogo ? event.eventLogo : 'https://cdn.artaic.fr/images/Blason-Salty.png'}}" alt="Logo de l'événement {{event.eventName}}">
								</div>
								<div class="details">
									<div class="slots">
										<span>X slots</span>
									</div>
									<div class="format">
										<span>5v5 - BO3</span>
									</div>
								</div>
								<div class="btn_section">
									<a class="btn btn-info" href="{{ path('app_event_show', {'id': event.id}) }}">
										<span class="iconify" data-icon="carbon:view-filled"></span>
										Voir l'événement</a>
								</div>
							</div>
						</div>
					{% endif %}
				{% endfor %}

			</div>
		</div>
	</section>


	{# <h1>Liste des événements</h1>
														<table id="eventList" class="display">
															<thead>
																<tr>
																	{% if is_granted('ROLE_ADMIN') %}
																		<th>Id</th>
																	{% endif %}
																	<th>Nom</th>
																	<th>Edition</th>
																	<th>Logo</th>
																	<th>Hashtag</th>
																	<th>Cashprize</th>
																	<th>Début</th>
																	<th>Fin</th>
																	<th>Actions</th>
																</tr>
															</thead>
															<tbody>
																{% for event in events %}
																	<tr>
																		{% if is_granted('ROLE_ADMIN') %}
																			<td>{{ event.id }}</td>
																		{% endif %}
																		<td>{{ event.eventName }}</td>
																		<td>
																			<span class="badge bg-info" style="color: #212529">{{ event.eventEdition }}</span>
																		</td>
																		<td>
																			<a href="{{ event.eventLogo }}" target="_blank"><img style="width: 40%" src="{{ event.eventLogo != null ? event.eventLogo : 'https://cdn.artaic.fr/images/Blason-Salty.png' }}" alt="Logo de {{ event.eventName }}"></a>
																		</td>
																		<td>{{ event.eventHashtag }}</td>
																		<td>
																			<span class="badge bg-info" style="color: #212529">{{ event.eventCashprize }}</span>
																		</td>
																		<td>
																			{% if "now"|date_modify("+1 day")|date("m/d/Y", "Europe/Paris") == event.eventStartDate|date('m/d/Y', "Europe/Paris") %}
																				<span class="badge bg-warning pulsate-bck">Demain</span>
																			{% endif %}
																			{% if "now"|date_modify("-1 day")|date("m/d/Y", "Europe/Paris") == event.eventStartDate|date('m/d/Y', "Europe/Paris") %}
																				<span class="badge bg-light">Hier</span>
																			{% endif %}
																			{% if "now"|date_modify("-1 day")|date("m/d/Y", "Europe/Paris") != event.eventStartDate|date('m/d/Y', "Europe/Paris") and "now"|date_modify("+1 day")|date("m/d/Y", "Europe/Paris") != event.eventStartDate|date('m/d/Y') %}
																				<span class="badge bg-light" style="color: #212529">{{ event.eventStartDate ? event.eventStartDate|date('d/m H:i', "Europe/Paris") : '' }}</span>
																			{% endif %}
																		</td>
																		<td>
																			<span class="badge bg-dark">{{ event.eventEndDate ? event.eventEndDate|date('d/m H:i') : '' }}</span>
																		</td>
																		<td>
																			<a class="btn btn-info" href="{{ path('app_event_show', {'id': event.id}) }}">
																				<span class="iconify" data-icon="carbon:view-filled"></span>
																				Détails</a>
																			<a class="btn btn-warning" href="{{ path('app_event_edit', {'id': event.id}) }}">
																				<span class="iconify" data-icon="bxs:edit"></span>
																				Editer</a>
																		</td>
																	</tr>
																{% else %}
																	<tr>
																		<td colspan="10">Rien n'a été trouvé</td>
																	</tr>
																{% endfor %}
															</tbody>
														</table>
														<a class="btn btn-info" href="{{ path('app_event_new') }}">
															<span class="iconify" data-icon="akar-icons:circle-plus-fill"></span>Créer un nouvel événement</a> #}
{% endblock %}
